# קטאן - מחלקות וירושה
המתיישבים של קטאן הוא משחק קופסא ל-3 עד 4 שחקנים המשלב הן חשיבה אסטרטגית, ניהול משאבים ויכולת מסחר. מטרת המשחק היא לצבור ראשון 10 נקודות ניצחון.
לפני שאסביר על המימוש אסביר על ההיררכיה של המחלקות.
#המשחק דורש שילוב של מחלקות:
1)Building - מחלקה המייצגת מבנה כלשהו בגרף,יכול להיות קודקוד ויכול להיות דרך. המחלקה מחזיקה משתנה שאומר מי שולט על המבנה הזה,מאותחל ב(-1).
1)vertex - המחלקה הזו מייצגת קודקוד בלוח,המחלקה יורשת ממבנה המחלקה קודקוד מחזיקה את ערכי האיקס והווי שלו,מחזיקה וקטור של משאבים שהוא יכול לקבל, מחזיק וקטור של קודקודים שכנים שלו ובנוסף ווקטור של דרכים המגיעות/יוצאות ממנו.
2)Road - מחלקה המייצגת דרך בלוח,גם יורשת ממבנה, המחלקה דרך מורכבת מ2 מצביעים לקודקדים שלה (קודקוד ראשון וקודקוד שני).
3)Resource - מחלקה המייצגת את סוגי המשאבים האפשריים.
4)Land - מחלקה המייצגת חלקת אדמה בלוח(משושה).המחלקה מחזיקה את המספר שלה,את סוג המשאב שהיא נותנת ובנוסף מחזיקה ווקטור של מצביעים לדרכים הנמצאו בה וגם ווקטור של מצביעים לקודקודים שהיא מכילה.
5)Card,DevoplmentCard and ResourceCard - יצרתי מחלקה פשוטהשל קלף שממנה יורשות קלף פיתוח וקלף משאב,המחלקה מחזיקה מחרוזת המייצגת את סוג הכרטיס.
6)Player - מחלקה מייצגת שחקן במשחק,שחקן מחזיק שם,אינדקס,כמות נקודות,כמות קלפי אבירים,וקטור של כרטיסי משאבים ווקטור של כרטיסי פיתוח שיש ברשותו.
7)Board - מחלקה המייצגת את לוח המשחק,המחלקה מחזיקה לוח דו-מימדי המורכב מ19 משושים , מחזיקה ווקטור של מצביעים לכל הדרכים וכל הקודקודים הקיימות בלוח.
8)Catan -  מחלקה המייצגת את המשחק עצמו, המחלקה מחזיקה את לוח המשחק, את השחקנים ואת קלפי הפיתוח שיש במשחק -מאותחל בתחילת משחק.
                                                                                                                                #מימוש המשחק :
לפני תחילת המשחק אני יוצר את הלוח ואת השחקנים, השחקנים מחזיקים שם ואינדקס (0,1 או 2) שייצג אותם, דבר שיעזור לי בקביעת התור של השחקנים, ויעזור לי לזהות מי השחקן השולט על חלקה/עיר/ישוב/דרך מסוימת.
לגבי הלוח -בהתחלה יצרתי לוח של מצביעים לקודקודים של המפה ולוח דו מימדי שמורכב ממשושים וחיפשתי דרך בהינתן משושה למצוא את הקודקוד השמאלי העליון, מצאתי נוסחה מה שעזר לי לגלות את כל קודקודי המשושה. הפונקצהי initLands- דואגת לכך שהלוח נוצר בכל משחק באופן רנדומלי,כלומר מיקום המשאבים ומספרם מוגרל רנדומלית לכן משתנה ממשחק למשחק,ביצירת משושה אני מוסיף לו את המצביעים לקודקודים שלו, קודם כל בודק אם המצביע קיים כבר (יש משושים עם קודקודים משותפים לכן השתמשתי במצביע למנוע כפיליות) -אם הוא כבר קיים אז מחזיר אותו, אחרת יוצר מבציע חדש ומוסיף לוקטור קודקודי הלוח וגם לוקטור קודקודי החלקה - אותה גישה לגבי הדרכים. דוגמא להמחשה לאיך הלוח נראה:
[ ]   [ ]  [ IRON  11] [ IRON  6] [ IRON  3] 
[ ]    [ WOOL  8] [ DESERT  0] [ BRICK  5] [ WOOL  2] 
[ WOOL  3] [ BRICK  4] [ WOOL  6] [ OATS  5] [ OATS  8] 
    [ WOOD  9] [ WOOD  10] [ BRICK  12] [ OATS  9]  [ ]  
          [ OATS  11] [ WOOD  10] [ WOOD  4]  [ ]   [ ]
* כל שחקן לפי הסדר מתחיל את המשחק בלמקם 2 דרכים ו2 ישובים עושה זאת על ידי קריאה לפונקציה playRoad ו-playSettelment ב2 הסיבובים הראשונים השחקן ממקם בצורה חופשית ללא צורך במשאבים. הפונקציה מקבלת וקטור של משאבים וגם וקטור של מספרים . הפוקנציות מחפשות חלקה על ידי שימוש בלולאה על לוח המשחק המורכב מחלקות ומחפשת חלקה שמכילה גם מספר מהוקטור המספרים וגם משאב מוקטור המשאבים, נניח מדובר בבניית דרך אז הפונקציה עוברת על הדרכים ומחפשת דרך פנויה (שמי ששולט עליה הוא 1-) כך שיש לה דרך שכנה שהיא בבעלות השחקן או שיש לה יישוב/עיר בבעלות השחקן הבדיקה נעשת על ידי השוואת לאינדקס השחקן. במידה וכן- משנים את הבעל של הדרך להיות אינדקס השחקן, אחרת אני רץ על חלקות אחרות ומחפש דרך אחרת-במידה ולא מצאתי בכל החלקות אני ממקם דרך בדרך פנויה.
בבניית ישוב אותו עיקרון כמעט כמו הדרך רק שניתן לבנות על אך ורק צומת שאליה מובילה דרך אחת לפחות ומברחק של 2 קטעי דרך מיישוב אחר, במידה והשחקן רוצה לבנות עיר-כל קודקוד מחזיק משתנה בוליאני isCity שמאותחל בfalse; אני בודק שיש לשחקן את המשאבים הנדרשים,במידה וכן- אני שוב רק על כל החלקות מחפש חלקה שעונה על וקטור המשאבים וגם וקטור המספרים,מחפש יישוב שבבעלות השחקן ומשנה את המשתנה לTrue, במידה ונמצא קודקוד לבנייה השחקן מקבל נקודה אם זה יישוב ו2 אם זו עיר.

* הטלת קוביה - בהטלת קוביה כל שחקן יכול להטיל רק בתורו, הפונקציה מגרילה מספר בין 2 ל12 , במידה ויצא 7, קורא לפונקציה CutResourceCards שעוברת על כל השחקנים ובודקת אם יש להם יותר מ7 כרטיסי משאבים ואם כן מוחקת להם חצי. אחרת, אני קורא לפונקציה handleDice שרצה על החלקות במפה ובודקת אם המספר שלהם תואם למספר הטלת הקוביה, במידה וכן רצה על המצביעים של הקודקודים שלה- בודקת אם יש לה שחקן שבנה שם במידה וכן מוסיפה לו משאב אחד אם זה ישוב ו2 משאבים אם זה עיר.
* 
*קניית קלף פיתוח - נעשת רק בתור של שחקן, ומתבצעת רק אם יש לו את המשאבים המתאימים, הקלף נבחר בצורה רנדומלית מוקטור כרטיסי הפיתוח במחלקת catan ומתווסף לוקטור כרטיסי הפיתוח של השחקן, במידה והכרטיס שיצא הוא שנת שפע השחקן יכול לקרוא לפונקציה usePlentYear עם וקטור של 2 משאבים שהוא רוצה והם יתווספו לו לוקטור המשאבים.

*מסחר - למסחר נתתי שתי פונקציות -tradeResource ו tradeDevolopmentCards , המאפשרות החלפה בין משאב למשאב אחר ובין כרטיס פיתוח לכרטיס אחר.
הפונקציה בודקת אם אכן קיימים הקלפים לשחקנים , מבצעת הוספה ומחיקה ל2 הצדדים ומשנה את נקודות השחקן במידת הצורך.

*הפונקציה endTurn משנה את התור של שחקן לשחקן הבא אחריו ולאחר מכן ישר נעשת בדיקה אם השחקן הבא הגיע ל10 נקודות וסיים את המשחק.






                                                                                                                           

